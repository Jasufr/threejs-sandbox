import"./modulepreload-polyfill-B5Qt9EMX.js";import{G as b,S,T as v,D as M,a as P,b as k,A as O,L as w,M as R,P as T,c as C,d as F,e as z,f as D,O as G,W as I,C as W}from"./DRACOLoader-A0AG0uAN.js";const j=new b({width:400}),u=document.querySelector("canvas.webgl"),c=new S,E=new v,f=new M;f.setDecoderPath("draco/");const h=new P;h.setDRACOLoader(f);const g=E.load("baked.jpg");g.flipY=!1;g.colorSpace=k;let d=null,o=null,n=null,i=null,r=!1;console.log(h);h.load("/threejs-sandbox/models/slimeAnimated.glb",e=>{d=new O(e.scene),o=d.clipAction(e.animations[1]),n=d.clipAction(e.animations[2]),i=d.clipAction(e.animations[0]),n.clampWhenFinished=!0,n.loop=w,i.clampWhenFinished=!0,i.loop=w,o.play(),console.log(e.animations),e.scene.scale.set(.5,.5,.5),c.add(e.scene)});function J(){!n||!o||r||(r=!0,o.fadeOut(.2),n.reset().fadeIn(.2).play(),n.getMixer().addEventListener("finished",e=>{e.action===n&&(r=!1,n.fadeOut(.2),o.reset().fadeIn(.2).play())},{once:!0}))}function q(){!i||!o||r||(r=!0,o.fadeOut(.2),i.reset().fadeIn(.2).play(),i.getMixer().addEventListener("finished",e=>{e.action===i&&(r=!1,i.fadeOut(.2),o.reset().fadeIn(1).play())},{once:!0}))}const L=j.addFolder("Animations");L.add({playJump:J},"playJump").name("Jump");L.add({playAttack:q},"playAttack").name("Attack");const m=new R(new T(10,10),new C({color:"#4F7942",metalness:0,roughness:.5}));m.receiveShadow=!0;m.rotation.x=-Math.PI*.5;c.add(m);const H=new F(16777215,2.4);c.add(H);const t=new z(16777215,1.8);t.castShadow=!0;t.shadow.mapSize.set(1024,1024);t.shadow.camera.far=15;t.shadow.camera.left=-7;t.shadow.camera.top=7;t.shadow.camera.right=7;t.shadow.camera.bottom=-7;t.position.set(5,5,5);c.add(t);const a={width:window.innerWidth,height:window.innerHeight};window.addEventListener("resize",()=>{a.width=window.innerWidth,a.height=window.innerHeight,s.aspect=a.width/a.height,s.updateProjectionMatrix(),l.setSize(a.width,a.height),l.setPixelRatio(Math.min(window.devicePixelRatio,2))});const s=new D(45,a.width/a.height,.1,100);s.position.x=4;s.position.y=2;s.position.z=4;c.add(s);const x=new G(s,u);x.enableDamping=!0;const l=new I({canvas:u,antialias:!0});l.setSize(a.width,a.height);l.setPixelRatio(Math.min(window.devicePixelRatio,2));const B=new W;let p=0;const A=()=>{const e=B.getElapsedTime(),y=e-p;p=e,d!==null&&d.update(y),x.update(),l.render(c,s),window.requestAnimationFrame(A)};A();
